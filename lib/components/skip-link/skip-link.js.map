{"version":3,"sources":["../../../src/components/skip-link/skip-link.jsx"],"names":["SkipLink","testHeadingElement","props","document","getElementsByTagName","headingElement","addEventListener","e","preventDefault","removeFocus","setAttribute","focus","removeAttribute","addFocus","skipLinkRef","React","createRef","removeEventListener","href","children","className","rest","handleSkipLink","Component","defaultProps","style"],"mappings":"umGAIA;;;;;;;;MAUMA,CAAAA,Q,0BACJ,YAAc,qKAKM,UAAM,IAChBC,CAAAA,CADgB,CACO,EAAKC,KADZ,CAChBD,kBADgB,GAECE,QAAQ,CAACC,oBAAT,CAA8B,IAA9B,CAFD,uBAEjBC,CAFiB,MAGxB,EAAKA,cAAL,CAAsBJ,CAAkB,EAAII,CAHpB,CAIpB,EAAKA,cAJe,EAKtB,EAAKA,cAAL,CAAoBC,gBAApB,CAAqC,MAArC,CAA6C,SAAAC,CAAC,CAAI,CAChDA,CAAC,CAACC,cAAF,EADgD,CAEhD,EAAKC,WAAL,EACD,CAHD,CAKH,CAfa,uDA0BH,UAAM,CACX,EAAKJ,cADM,GAEb,EAAKA,cAAL,CAAoBK,YAApB,CAAiC,UAAjC,CAA6C,IAA7C,CAFa,CAGb,EAAKL,cAAL,CAAoBM,KAApB,EAHa,CAKhB,CA/Ba,0DAiCA,UAAM,CACd,EAAKN,cADS,EAEhB,EAAKA,cAAL,CAAoBO,eAApB,CAAoC,UAApC,CAEH,CArCa,6DAuCG,SAAAL,CAAC,CAAI,CACpBA,CAAC,CAACC,cAAF,EADoB,CAEhB,EAAKH,cAFW,EAGlB,EAAKQ,QAAL,EAEH,CA5Ca,EAEZ,EAAKC,WAAL,CAAmBC,kBAAMC,SAAN,EAFP,EAGb,C,uGAcsB,YACjB,KAAKX,cADY,EAEnB,KAAKA,cAAL,CAAoBY,mBAApB,CAAwC,MAAxC,CAAgD,SAAAV,CAAC,CAAI,CACnDA,CAAC,CAACC,cAAF,EADmD,CAEnD,CAAI,CAACC,WAAL,EACD,CAHD,CAKH,C,uCAsBQ,OACwC,KAAKP,KAD7C,CACCgB,CADD,GACCA,IADD,CACOC,CADP,GACOA,QADP,CACiBC,CADjB,GACiBA,SADjB,CAC+BC,CAD/B,6DAEP,MACE,+CACE,IAAI,CAAEH,CADR,CAEE,GAAG,CAAE,KAAKJ,WAFZ,CAGE,OAAO,CAAE,KAAKQ,cAHhB,CAIE,SAAS,CAAE,2BAAW,iBAAX,CAA8BF,CAA9B,CAJb,EAKMC,CALN,EAOGF,CAPH,CAUH,C,OA5DoBJ,kBAAMQ,S,EAuE7BvB,QAAQ,CAACwB,YAAT,CAAwB,CACtBL,QAAQ,CAAE,sBADY,CAEtBD,IAAI,CAAE,cAFgB,CAGtBE,SAAS,CAAE,EAHW,CAItBK,KAAK,CAAE,EAJe,CAKtBxB,kBAAkB,GALI,C,cAQTD,Q","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport stylePropType from 'react-style-proptype';\nimport classNames from 'classnames';\n/*\n * Skip link\n *\n * When using VoiceOver on iOS, focus remains on the skip link anchor\n * when elected so the next focusable element is not at the jumped to area.\n * This Javascript hack focuses on the first page <h1> element\n * (if one exists, which it should) by adding tabindex = -1 to it and\n * then removes it when focus is off it.\n */\n\nclass SkipLink extends React.Component {\n  constructor() {\n    super();\n    this.skipLinkRef = React.createRef();\n  }\n\n  componentDidMount = () => {\n    const { testHeadingElement } = this.props;\n    const [headingElement] = document.getElementsByTagName('h1');\n    this.headingElement = testHeadingElement || headingElement;\n    if (this.headingElement) {\n      this.headingElement.addEventListener('blur', e => {\n        e.preventDefault();\n        this.removeFocus();\n      });\n    }\n  };\n\n  componentWillUnmount() {\n    if (this.headingElement) {\n      this.headingElement.removeEventListener('blur', e => {\n        e.preventDefault();\n        this.removeFocus();\n      });\n    }\n  }\n\n  addFocus = () => {\n    if (this.headingElement) {\n      this.headingElement.setAttribute('tabIndex', '-1');\n      this.headingElement.focus();\n    }\n  };\n\n  removeFocus = () => {\n    if (this.headingElement) {\n      this.headingElement.removeAttribute('tabIndex');\n    }\n  };\n\n  handleSkipLink = e => {\n    e.preventDefault();\n    if (this.headingElement) {\n      this.addFocus();\n    }\n  };\n\n  render() {\n    const { href, children, className, ...rest } = this.props;\n    return (\n      <a\n        href={href}\n        ref={this.skipLinkRef}\n        onClick={this.handleSkipLink}\n        className={classNames('nhsuk-skip-link', className)}\n        {...rest}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nSkipLink.propTypes = {\n  href: PropTypes.string,\n  children: PropTypes.string,\n  className: PropTypes.string,\n  style: stylePropType,\n  testHeadingElement: PropTypes.oneOf([PropTypes.node, PropTypes.bool])\n};\n\nSkipLink.defaultProps = {\n  children: 'Skip to main content',\n  href: '#maincontent',\n  className: '',\n  style: {},\n  testHeadingElement: false\n};\n\nexport default SkipLink;\n"],"file":"skip-link.js"}