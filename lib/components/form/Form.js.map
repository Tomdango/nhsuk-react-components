{"version":3,"sources":["../../../src/components/form/Form.jsx"],"names":["Form","props","name","value","setState","formData","state","onChange","e","onSubmit","error","errorDetails","errorState","Object","keys","includes","errorCallback","onErrorChange","className","children","title","titleSize","style","rest","contextValue","registerComponent","updateFormState","passBackError","length","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport stylePropType from 'react-style-proptype';\nimport FormContext from './FormContext';\nimport { Heading } from '../typography';\n\nclass Form extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    onChange: PropTypes.func,\n    onSubmit: PropTypes.func,\n    children: PropTypes.node.isRequired,\n    onErrorChange: PropTypes.func,\n    title: PropTypes.string,\n    titleSize: PropTypes.string,\n    style: stylePropType\n  };\n\n  static defaultProps = {\n    className: '',\n    onChange: () => {},\n    onSubmit: () => {},\n    onErrorChange: () => {},\n    title: '',\n    titleSize: 'xl',\n    style: {}\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      formData: {},\n      errorState: {}\n    };\n  }\n\n  registerComponent = (name, value) => {\n    this.setState(() => {\n      const { formData } = this.state;\n      formData[name] = value;\n      return { formData };\n    });\n  };\n\n  updateFormState = (name, value) => {\n    const { onChange } = this.props;\n    this.setState(() => {\n      const { formData } = this.state;\n      formData[name] = value;\n      if (onChange) onChange(formData);\n      return { formData };\n    });\n  };\n\n  onSubmit = e => {\n    const { onSubmit } = this.props;\n    const { formData } = this.state;\n    if (onSubmit) onSubmit(e, formData);\n  };\n\n  passBackError = (name, error = true, errorDetails) => {\n    const { errorState } = this.state;\n    if (!Object.keys(errorState).includes(name) && error === true) {\n      this.setState(\n        { errorState: { [name]: errorDetails, ...errorState } },\n        this.errorCallback\n      );\n    }\n  };\n\n  errorCallback = () => {\n    const { errorState } = this.state;\n    const { onErrorChange } = this.props;\n    if (onErrorChange) {\n      onErrorChange(errorState);\n    }\n  };\n\n  render() {\n    const {\n      className,\n      children,\n      title,\n      titleSize,\n      style,\n      ...rest\n    } = this.props;\n    const { errorState } = this.state;\n    const contextValue = {\n      registerComponent: this.registerComponent,\n      updateFormState: this.updateFormState,\n      passBackError: this.passBackError\n    };\n    return (\n      <form {...rest} onSubmit={this.onSubmit}>\n        <div\n          className={classNames(\n            'nhsuk-form-group',\n            { 'nhsuk-form-group--error': Object.keys(errorState).length > 0 },\n            className\n          )}\n          style={style}\n        >\n          {title ? <Heading size={titleSize}>{title}</Heading> : null}\n          <FormContext.Provider value={contextValue}>\n            {children}\n          </FormContext.Provider>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default Form;\n"],"file":"Form.js"}